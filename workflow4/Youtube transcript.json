{
  "name": "Youtube transcript",
  "nodes": [
    {
      "parameters": {
        "pollTimes": {
          "item": [
            {}
          ]
        },
        "feedUrl": "https://www.youtube.com/feeds/videos.xml?channel_id=UCShHFwKyhcDo3g7hr4f1R8A"
      },
      "type": "n8n-nodes-base.rssFeedReadTrigger",
      "typeVersion": 1,
      "position": [-368, -192],
      "id": "260a0820-9bd3-4e44-9f6c-35cb59243d8b",
      "name": "World  science festival YTB"
    },
    {
      "parameters": {
        "pollTimes": {
          "item": [
            {}
          ]
        },
        "feedUrl": "https://www.youtube.com/feeds/videos.xml?channel_id=UCpMcsdZf2KkAnfmxiq2MfMQ"
      },
      "type": "n8n-nodes-base.rssFeedReadTrigger",
      "typeVersion": 1,
      "position": [-368, 0],
      "id": "26d1e38e-2bf7-489e-a7db-c88d4c8f1ce8",
      "name": "ARVIN ASH YTB"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "24c0c5a0-5e5b-4153-a2c7-0d51cc7356a9",
              "name": "Title",
              "value": "={{ $json.title }}",
              "type": "string"
            },
            {
              "id": "28926b6a-ad05-4284-88aa-7e6ce66cc0ce",
              "name": "url",
              "value": "={{ $json.link }}",
              "type": "string"
            },
            {
              "id": "44e5dfae-0634-47f1-b386-a2df6bfff090",
              "name": "Author",
              "value": "={{ $json.author }}",
              "type": "string"
            },
            {
              "id": "25322d53-9b03-4de1-8daf-5fad803b4180",
              "name": "Publih_data",
              "value": "={{ $json.pubDate }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [-112, -112],
      "id": "461bc41d-0259-4f27-b8bb-e443626d10a0",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "operation": "get",
        "dataTableId": {
          "__rl": true,
          "value": "your_datatable_id",
          "mode": "list",
          "cachedResultName": "Ytb data",
          "cachedResultUrl": "/projects/your_project_id/datatables/your_datatable_id"
        },
        "matchType": "allConditions",
        "filters": {
          "conditions": [
            {
              "keyName": "url",
              "keyValue": "={{ $json.url }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [96, -112],
      "id": "afc9451e-6341-4076-bd1b-09ca72edf912",
      "name": "filter the data",
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "36676643-39fd-42b9-994b-ef5d173f7b5a",
              "leftValue": "={{ $json.url }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [304, -112],
      "id": "e70c67e7-d8c8-4648-8259-a81c309247b5",
      "name": "If"
    },
    {
      "parameters": {
        "dataTableId": {
          "__rl": true,
          "value": "your_datatable_id",
          "mode": "list",
          "cachedResultName": "Ytb data",
          "cachedResultUrl": "/projects/your_project_id/datatables/your_datatable_id"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Title": "={{ $('Edit Fields').item.json.Title }}",
            "url": "={{ $('Edit Fields').item.json.url }}",
            "author": "={{ $('Edit Fields').item.json.Author }}",
            "publish_date": "={{ $('Edit Fields').item.json.Publih_data }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Title",
              "displayName": "Title",
              "type": "string"
            },
            {
              "id": "url",
              "displayName": "url",
              "type": "string"
            },
            {
              "id": "author",
              "displayName": "author",
              "type": "string"
            },
            {
              "id": "publish_date",
              "displayName": "publish_date",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [512, -16],
      "id": "b0f51256-b88b-4f0e-a26e-e59859919a7e",
      "name": "Insert row"
    },
    {
      "parameters": {
        "jsCode": "// Extract video IDâ€¦"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [720, -16],
      "id": "6f2b7a24-1aba-40ce-b3c4-9012bfff634d",
      "name": "extract ID from Url"
    },
    {
      "parameters": {
        "model": "mistral-large-latest",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatMistralCloud",
      "typeVersion": 1,
      "position": [1152, 240],
      "id": "58af8359-10ce-43cf-8ee4-577a21501a58",
      "name": "Mistral Cloud Chat Model",
      "credentials": {
        "mistralCloudApi": {
          "id": "your_id",
          "name": "your_mistral_cloud_credential"
        }
      }
    },
    {
      "parameters": {
        "jsonSchemaExample": "{...}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [1376, 192],
      "id": "687b4c01-8349-4d43-8fd1-3b7229c5220e",
      "name": "Structured Output Parser"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.title }}\n{{ $json.description }}\n{{ $json.transcriptionAsText }}",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "Your system prompt here..."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [1136, -16],
      "id": "de9d6c91-f055-42ec-9ffc-e9bafb554679",
      "name": "YTB evaluator Agent"
    },
    {
      "parameters": {
        "sendTo": "your_email@example.com",
        "subject": "Youtube transcript review",
        "emailType": "text",
        "message": "=Dear User..."
      },
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [1952, 144],
      "id": "805b19aa-04ea-4d61-b4e6-eb9dd23651e4",
      "name": "Send a message",
      "webhookId": "5873cb92-bafb-46d1-baa6-3fee1138e2dc",
      "credentials": {
        "gmailOAuth2": {
          "id": "your_id",
          "name": "your_gmail_credential"
        }
      }
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.noOp",
      "position": [512, -224],
      "id": "12c7a50c-99f6-4865-863d-7bd2f20a325a",
      "name": "No Operation, do nothing"
    },
    {
      "parameters": {
        "url": "https://youtube-transcriptor.p.rapidapi.com/transcript",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            { "name": "video_id", "value": "={{ $json.videoId }}" },
            { "name": "lang", "value": "en" }
          ]
        },
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            { "name": "x-rapidapi-host", "value": "youtube-transcriptor.p.rapidapi.com" },
            { "name": "x-rapidapi-key", "value": "your_rapidapi_key" }
          ]
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [960, -16],
      "id": "2a61dc4a-fc4e-421d-8079-292e1fd32e68",
      "name": "RapidApi YTB transcript1",
      "retryOnFail": true
    }
  ]
}

